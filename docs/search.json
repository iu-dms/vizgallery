[
  {
    "objectID": "raincloud.html",
    "href": "raincloud.html",
    "title": "Raincloud Plots",
    "section": "",
    "text": "Resources\nMuch of the explanation below comes from Cedric Scherer, a visualization and design expert known for many things, including his work with ggplot2. Find his work here: https://www.cedricscherer.com/, and his blog on raincloud plots here: https://www.cedricscherer.com/2021/06/06/visualizing-distributions-with-raincloud-plots-and-how-to-create-them-with-ggplot2/#back1\n\n\nBackground\nRain cloud plots were officially introduced in 2019 (https://wellcomeopenresearch.org/articles/4-63) as an approach to overcome issues of hiding the true data distribution when plotting in typical charts such as box plots. Instead, raincloud plots combine several chart types to visualize the raw data, the distribution of the data as density, and key summary statistics at the same time.\n\nBox Plots\nBox plots are used often in our type of work for summary statistics/reports, but they have limitations.\n\n\nDisplay code to generate dummy data\nset.seed(2021)\n\ngrp1 &lt;- tibble(value = seq(0, 20, length.out = 75), \n               group = \"Group 1\")\n\ngrp2 &lt;- tibble(value = c(rep(0, 5), rnorm(20, 2, .2), rnorm(50, 6, 1), \n                         rnorm(50, 14.5, 1), rnorm(20, 18, .2), rep(20, 5)), \n               group = \"Group 2\")\n\ngrp3 &lt;- tibble(value = rep(seq(0, 20, length.out = 5), 5), \n               group = \"Group 3\")\n\ndummy &lt;- bind_rows(grp1, grp2, grp3)\n\n\n\nggplot(dummy, aes(x = group, y = value)) +\n  geom_boxplot(fill = \"grey92\")\n\n\n\n\n\n\n\n\nThe above plot summarizes the data by group, but does this give a complete picture of the data?\n\n\n\n\n\n\nBox Plot Interpretation\n\n\n\n\nQuestions:\n\nHow many observations in each group?\nAre distribution patterns across the groups similar?\n\nHow can we improve this visualization?\n\nAdd raw data\nAdd overall distribution\n\n\n\n\n\n\n\nEnter The Raincloud Plot\n\n\n\nCedric Scherer shared this post about his feelings on box plots versus raincloud plots\n\n\nRaincloud plots can be used to visualize raw data, the distribution of the data, and key summary statistics at the same time. These comprise of multiple plots added together, consisting of a halved violin plot, a box plot, and the raw data as some kind of scatter plot.\nWeâ€™ll use 3 distinct elements to make these plots as noted above, leveraging 4 different R packages: 1. ggplot2 2. ggdist 3. ggbeeswarm\n\nBasic Version\n\n\nDisplay/Hide code\nlibrary(palmerpenguins)\npp &lt;- penguins\n\nggplot(pp, aes(x = species, y = bill_length_mm)) + \n  ggdist::stat_halfeye(\n    adjust = .5, \n    width = .6, \n    .width = 0, \n    justification = -.2, \n    point_colour = NA\n  ) + \n  geom_boxplot(\n    width = .15, \n    outlier.shape = NA\n  ) +\n  ggbeeswarm::geom_quasirandom(\n    shape=21,\n    width=.2) \n\n\n\n\n\n\n\n\n\nThe formatting possibilities are endless! Using these separate plots allow maximum flexibility to fit your use case.\n\n\nFormatted Version\n\n\nDisplay code\nnew_labels &lt;- c(\"Adelie\"=\"ADELIE\",\n                      \"Gentoo\"=\"GENTOO\",\n                      \"Chinstrap\"=\"CHINSTRAP\")\npal &lt;- c(\"#FF8C00\", \"#A034F0\", \"#159090\")\n\nrcplot &lt;- function(titletext, captext){\n  ggplot(pp, aes(x=species, y=bill_length_mm, fill=species)) +\n    \n  ggdist::stat_halfeye(\n      adjust = .5, \n      width = 1.0, \n      .width = 0, \n      justification = -0.3, \n      point_colour = NA,\n      alpha=0.6)+\n    \n  geom_boxplot(width=0.4, color=\"black\", outlier.shape = NA, alpha=.9) +\n    \n  ggbeeswarm::geom_quasirandom(aes(color=species),\n    shape=21,                           \n    size = 1,\n    alpha = 1,\n    width = .2) +\n    \n  labs(x='', y='Bill Length (mm)', title = titletext, subtitle = captext)+\n  scale_color_manual(values = pal, guide = \"none\") +\n  scale_fill_manual(values = pal, guide = \"none\") +\n  facet_grid(cols=vars(species), scales=\"free_x\", labeller = labeller(species=new_labels))+\n  theme_classic()+\n  theme(legend.position=\"none\", \n        legend.title = element_blank(), \n        plot.title = element_text(size=14, face=\"bold\"),\n        plot.subtitle = element_text(size=10, lineheight = 0.5 ), \n        axis.text.y=element_text(size=8, face=\"plain\"), \n        axis.title.y = element_text(size=8, face=\"plain\"), \n        axis.text.x=element_blank(),\n        # axis.ticks.y=element_blank(),\n        axis.ticks.x=element_blank())+\n  theme(strip.background =element_rect(fill='white'))\n\n}\n\nplot &lt;- rcplot(paste0(\"Figure 1. Bill Length by Species (n=\", as.numeric(length(na.omit(pp$bill_length_mm))) , \")\"),\n               \"Bill Length in mm by species from the palmer penguins dataset\")\n\nplot\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\nNote\n\n\n\nUse caution with color usage, as it is often not necessary. If reports will be consumed electronically, colors like used above would be accepatable. However, in some cases, say if reports will be printed often, using a color scheme of sequential blues (for example) would save sites/project teams ink usage and by most user friendly. See below for a custom blue scale that has worked well when sending to resource limited settings where printed reports are needed.\n\n\n\nBLUE_0 &lt;- \"#dbe3ed\" \nBLUE_25 &lt;- \"#b3c4e0\"\nBLUE_50 &lt;-\"#788dae\"  \nBLUE_75 &lt;- \"#5a7296\"\nBLUE_99 &lt;-  \"#3c567d\" \nBLUE_100 &lt;-  \"#334b6e\" \nNAGRAY &lt;- \"#cccccc\" # GRAY for NA values\n\n\n\n\nCedric Scherer shared this post about his feelings on box plots versus raincloud plots"
  },
  {
    "objectID": "enrollment.html",
    "href": "enrollment.html",
    "title": "Enrollment Tracking",
    "section": "",
    "text": "Here is an example of a basic bar plot with\n\n\nDisplay code\nsextotal &lt;- enrolldata |&gt; \n  group_by(sex) |&gt; \n  summarize(count=n())\n\n\nsexenroll1 = ggplot(data=sextotal, aes(x=sex, y=count, fill=sex)) + \n  geom_bar(stat=\"identity\", alpha=0.8, color=\"black\" )\n\nplot(sexenroll1)\n\n\n\n\n\n\n\n\n\nsexenroll2 = ggplot(data=sextotal, aes(x=sex, y=count, fill=sex)) + \n  geom_bar(stat=\"identity\", alpha=0.8, color=\"black\" )+\n  coord_flip()+\n  scale_fill_brewer(palette=\"BuPu\")+\n  xlab(\"\") + ylab(\"Number\") + \n  labs(title = \"Enrollment by Sex\") +\n  theme_classic()+\n  theme(plot.title = element_text(hjust = 0), legend.position=\"bottom\", legend.title = element_blank(), \n        plot.subtitle = element_text(size=9), plot.caption = element_text(hjust=0)) \n\nplot(sexenroll2)\n\n\n\nDisplay code"
  },
  {
    "objectID": "about.html",
    "href": "about.html",
    "title": "About",
    "section": "",
    "text": "About this site\n\n1 + 1\n\n[1] 2"
  },
  {
    "objectID": "index.html",
    "href": "index.html",
    "title": "BHDS Data Management Visualization Guide",
    "section": "",
    "text": "Introduction\nThis website is meant to be a resource for users interested in learning more about developing reusable reports using RMarkdown. This site also contains code snippets to get users started with a variety of data visualizations commonly used in our Department.\nTo learn more about Quarto websites visit https://quarto.org/docs/websites.\n\n1 + 1\n\n[1] 2"
  }
]